{
    "startup": {},
    "config": {
        "enabled": true,
        "reload_changed_ms": 0,
        "reload_sighup": false
    },
    "core": {
        "enable_callback_check": true,
        "core_timeout_ms": 1000,
        "idle_timeout_ms": 1000,
        "rlimit_as_mb": 0,
        "workflow": {
            "use_io_service": false,
            "maxsize": 134217728,
            "wrnsize": 1048576,
            "threads": 1
        }
    },
    "logger": {
        "enabled": true,
        "startup_priority": -1000,
        "shutdown_priority": 1000,
        "path": "./slave1.log",
        "limit": 10000000,
        "milliseconds": true,
        "stdout": "clog",
        "syslog": "",
        "single": true,
        "custom": {},
        "deny": []
    },

    "prefixdb": [
      {
        "name": "prefixdb1",
        "enabled": true,
        "suspend": false,
        "startup_priority": 0,
        "shutdown_priority": 0,

        "path": "./prefixdb2",
        "ini": "./rocksdb.ini",
        "detach_path": "./prefixdb2_detach",
        "abort_if_open_error": true,
        "preopen": true,
        "auto_repair": false,
        "enable_delayed_write": false,

        "max_prefixes": 128,
        "prefix_size_limit": 256,
        "keys_per_req": 100,
        "range_limit": 10000,

        "key_size_limit": 128,
        "value_size_limit": 10240,

        "array_limit": 1000,
        "packed_limit": 1000,

        "stop_list": [],

        "workflow": {
          "enabled": false,
          "use_io_service": false,
          "threads": 0,
          "post_delay_ms": 0,
          "rate_limit": 0,
          "maxsize": 1000000,
          "wrnsize": 1000
        },

        "slave": {
          "enabled": false,
          "target": "",
          "start_time": "",
          "query_prefixes_timeout_ms": 2000,
          "pull_timeout_ms": 1000,
          "log_limit_per_req": 100,
          "seq_log_timeout_ms": 1000,
          "acceptable_loss_seq": 0,
          "enable_progress": false,
          "expires_for_req": true,
          "wrn_log_diff_seq": 10000,
          "wrn_log_timeout_ms": 1000
        },
        "backup": {
          "enabled": false,
          "path": "./prefixdb2_backup",
          "depth": 10,
          "period_s": 600,
          "start_delay_s": 0
        },
        "archive": {
          "enabled": false,
          "path": "./prefixdb_archive",
          "depth": 1,
          "period_s": 0,
          "start_time": "05:00:00"
        },
        "restore": {
          "backup_id": 0,
          "forbid": false,
          "path": "./prefixdb_backup"
        }
      }
    ],

    "prefixdb-service": [
      {
        "enabled": true,
        "name": "prefixdb-service1",
        "startup_priority": 0,
        "shutdown_priority": 0,
        "suspend": false,

        "target": "",
        "allow_non_jsonrpc": false,
        "call_lifetime_ms": 60000,
        "remove_everytime": true,
        "remove_outdated_ms": 1000,

        "workflow": {
          "enabled": false,
          "threads": 0,
          "wrnsize": 1048576,
          "maxsize": 134217728,
          "post_delay_ms": 0,
          "rate_limit": 0,
          "use_io_service": false,
        }
      }
    ],

    "prefixdb-gateway": [
      {
        "name": "gateway1",
        "enabled": true,
        "shutdown_priority": 0,
        "startup_priority": 0,

        "startup_reg": false,
        "incoming_target": "prefixdb1",
        "outgoing_target": "client-tcp1"
      }
    ],

    "server-tcp": [
      {
        "enabled": true,
        "name": "server-tcp2",
        "startup_priority": 100,
        "shutdown_priority": -100,
        "target": "prefixdb-service2",
        "threads": 0,

        "addr": "0.0.0.0",
        "port": "12346",
        "max_connections": 0,
        "backlog": 1024,

        "connection": {
          "keep_alive": true,
          "reader": {
            "bufsize": 4096,
            "maxbuf": 8192,
            "minbuf": 0,
            "sep": "\r\n",
            "trimsep": false
          },
          "writer": {
            "bufsize": 8192,
            "first_as_is": true,
            "maxbuf": 8192,
            "minbuf": 0,
            "sep": "\r\n"
          }
        }
      }
    ],


    "client-tcp": [
        { 
            "enabled": true,
            "name": "client-tcp1",
            "shutdown_priority": 200,
            "startup_priority": -200,

            "async_connect": true,
            "addr": "0.0.0.0", 
            "port": "12345",
            "connect_count": 1,                                                                                                            
            "threads": 0,
            "reconnect_timeout_ms": 1000,
            "wait_maxsize": 0,
            "wait_wrnsize": 0,
            "workflow": 
            {
              "enabled": false,
              "maxsize": 134217728,
              "threads": 1,
              "wrnsize": 1048576
            }
        }
    ]
}
